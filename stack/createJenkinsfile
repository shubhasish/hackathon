pipeline{

agent any
parameters {
        string(name: 'stack', defaultValue: 'dev', description: 'Name of the stack')
    }

stages {

   stage('create-stack'){
   steps {
             script{

                     withCredentials([[$class: 'AmazonWebServicesCredentialsBinding', credentialsId: 'aws']]){
                     sh "aws cloudformation ${env.JOB_NAME} --stack-name dev --template-body file://stack/infrastructure.yaml"
}
          }


 }}}}